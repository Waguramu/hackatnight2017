extends layout

block content
  .wrapper.font-white
    .row(style="text-align:center; margin-top: 12vh;")
      h1#firstTitle(style="width:100%")=title
    .row(style="text-align:center")
      div#container
        video(autoplay="true")#videoElement

block append footer
  script(src="custom/faceRecognition.js")
  script.
    var apigClient = apigClientFactory.newClient(!{JSON.stringify(apiKey)});
    getVehicles(apigClient);
  script.
      var video = document.querySelector("#videoElement");
      
      function handleVideo(stream) {
          video.src = window.URL.createObjectURL(stream);
      }
      function videoError(e) {
          console.log(e)
      }

      navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;
      if (navigator.getUserMedia) {
          navigator.getUserMedia({video: true}, handleVideo, videoError);
      }

      function uponRecognition() {
        $('#firstTitle').text('Facial recognition successful')
        window.location='/profile'
      }

      setTimeout(uponRecognition, 4000);

      

      